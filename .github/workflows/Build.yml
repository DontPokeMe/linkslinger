name: Build

on:
  push:
    branches: [main, master]
  pull_request:
    branches: [main, master]

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Validate manifest
        run: |
          node -e "const m = require('./src/manifest.json'); if (!m.manifest_version || !m.name || !m.version) process.exit(1); console.log('OK', m.name, m.version);"

      - name: Check extension structure
        run: |
          test -f src/background.js
          test -f src/content.js
          test -f src/ui/popup/popup.html
          test -f src/ui/options/options.html
