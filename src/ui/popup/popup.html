<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=400, initial-scale=1">
  <link rel="stylesheet" href="popup.css">
  <title>LinkSlinger</title>
</head>
<body>
  <div class="popup-root">
    <!-- A. Header -->
    <header class="popup-header">
      <div class="header-left">
        <div class="logo-wrap" aria-hidden="true">
          <svg class="logo-svg" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <filter id="logo-glow" x="-50%" y="-50%" width="200%" height="200%">
                <feGaussianBlur stdDeviation="0.8" result="blur"/>
                <feMerge>
                  <feMergeNode in="blur"/>
                  <feMergeNode in="SourceGraphic"/>
                </feMerge>
              </filter>
            </defs>
            <!-- Magnifying glass -->
            <circle cx="10.5" cy="10.5" r="6" stroke="currentColor" stroke-width="1.8" fill="none" filter="url(#logo-glow)"/>
            <path d="M15 15l4.5 4.5" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" filter="url(#logo-glow)"/>
            <!-- Padlock (small, inside circle) -->
            <rect x="8.2" y="9" width="4.6" height="3.2" rx="0.6" stroke="currentColor" stroke-width="1" fill="none"/>
            <path d="M9.5 9V7.5a1 1 0 012 0V9" stroke="currentColor" stroke-width="1" stroke-linecap="round" fill="none"/>
          </svg>
        </div>
        <span class="header-title">LinkSlinger</span>
      </div>
    </header>

    <!-- Tab bar -->
    <nav class="popup-tabs" role="tablist">
      <button type="button" class="popup-tab active" role="tab" id="tabAnalyze" aria-selected="true" aria-controls="panelAnalyze">Analyze</button>
      <button type="button" class="popup-tab" role="tab" id="tabSettings" aria-selected="false" aria-controls="panelSettings">Settings</button>
    </nav>

    <!-- B. Main: Analyze panel (Domain Screener) -->
    <main class="popup-main tab-panel" id="panelAnalyze" role="tabpanel" aria-labelledby="tabAnalyze">
      <div class="input-card glass">
        <label for="urlInput" class="sr-only">Domain or email to screen</label>
        <input
          type="text"
          id="urlInput"
          class="url-input data-mono"
          placeholder="e.g. example.com or user@example.com"
          spellcheck="false"
          autocomplete="off"
        />
      </div>
      <button type="button" class="btn-analyze" id="analyzeBtn">
        Screen Domain
      </button>

      <!-- Terminal-style loading (hidden by default) -->
      <div class="scanning-area glass" id="scanningArea" aria-live="polite" hidden>
        <div class="scanning-line data-mono" id="scanningLine">[Checking WHOIS...]</div>
      </div>

      <!-- C. Results Area (Domain Screener style) -->
      <section class="results-area" id="resultsArea" hidden>
        <!-- Verdict: ALLOW / REVIEW / BLOCK -->
        <div class="verdict-banner glass" id="verdictBanner" role="status">
          <span class="verdict-icon" aria-hidden="true"></span>
          <span class="verdict-text" id="verdictText"></span>
        </div>
        <!-- Optional message -->
        <div class="bento-card glass" id="messageCard" hidden>
          <p class="card-message" id="messageText"></p>
        </div>
        <!-- Details card (WHOIS/DNS summary if API returns) -->
        <div class="bento-card glass" id="detailsCard" hidden>
          <h3 class="card-title">Details</h3>
          <pre class="card-details data-mono" id="detailsText"></pre>
        </div>
      </section>
    </main>

    <!-- Settings panel -->
    <section class="popup-main tab-panel hidden" id="panelSettings" role="tabpanel" aria-labelledby="tabSettings">
      <div class="settings-panel glass">
        <p class="settings-intro">Configure profiles, actions, and blocked sites from the full options page.</p>
        <p class="settings-api-hint" id="apiKeyHint" hidden>Add a dontpoke.me API key in Advanced settings to enable the Analyze tab.</p>
        <button type="button" class="btn-open-settings" id="openSettingsBtn">Open full settings</button>
        <p class="settings-version" id="settingsVersion"></p>
      </div>
    </section>

    <!-- D. Footer (hidden until API key is set; shown by applyApiKeyVisibility) -->
    <footer class="popup-footer" hidden>
      <a href="https://dontpoke.me/tools/domain-screener/" target="_blank" rel="noopener" class="footer-link" id="fullReportLink">Full report: Domain Screener</a>
      <button type="button" class="btn-clear" id="clearBtn">Clear</button>
    </footer>
  </div>

  <script src="popup.js"></script>
</body>
</html>
